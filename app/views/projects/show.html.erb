<h1><%= @project.title %></h1> 
<p><strong>Description:</strong> <%= @project.description %></p>
<p><strong>Deadline:</strong> <%= @project.deadline.strftime("%B %d, %Y") if @project.deadline %></p>
<p><strong>Created by:</strong> <%= @project.creator.email %></p>

<hr>
<h2>Project Members</h2>
<ul>
  <% @project.project_memberships.each do |membership| %>
    <li>
      <%= membership.user.email %> (<%= membership.role %>)
    </li>
  <% end %>
</ul>

<hr>
<h2>Attachments</h2>
<% if @project.attachments.any? %>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>File URL</th>
        <th>Format</th>
        <th>Uploaded By</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @project.attachments.each do |attachment| %>
        <tr>
          <td><%= attachment.file_url %></td>
          <td><%= attachment.file_format %></td>
          <td><%= attachment.user.email %></td>
          <td>
            <%= link_to "Delete", project_attachment_path(@project, attachment), 
                        method: :delete, data: { confirm: "Are you sure?" }, 
                        class: "btn btn-sm btn-danger" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>No attachments yet.</p>
<% end %>

<hr>
<h3>Add a New Attachment</h3>
<%= form_with model: [@project, Attachment.new], local: true do |f| %>
  <div class="mb-3">
    <%= f.label :file_url, "File URL", class: "form-label" %>
    <%= f.text_field :file_url, class: "form-control", placeholder: "Enter file URL or path" %>
  </div>
  <div class="mb-3">
    <%= f.label :file_format, "File Format", class: "form-label" %>
    <%= f.select :file_format, 
          options_for_select([["PNG", "png"], ["JPG", "jpg"], ["PDF", "pdf"], ["TXT", "txt"]]),
          {}, class: "form-select" %>
  </div>
  <div class="mb-3">
    <%= f.submit "Add Attachment", class: "btn btn-primary" %>
  </div>
<% end %>

<hr>
<%= link_to "Invite Member", new_project_project_invitation_path(@project), class: "btn btn-primary" %>
<%= link_to "Edit Project", edit_project_path(@project), class: "btn btn-secondary" %>
<%= link_to "Back to Projects", projects_path, class: "btn btn-secondary" %>
